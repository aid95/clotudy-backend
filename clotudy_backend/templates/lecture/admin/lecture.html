{% load static %}

<!DOCTYPE html>
<html class="loading" lang="en" data-textdirection="ltr">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <meta name="description" content="Vuexy admin is super flexible, powerful, clean &amp; modern responsive bootstrap 4 admin template with unlimited possibilities.">
    <meta name="keywords" content="admin template, Vuexy admin template, dashboard template, flat admin template, responsive admin template, web app">
    <meta name="author" content="PIXINVENT">
    <title>CLOTUDY :: 클라우드 학습지원 시스템</title>
    <link rel="apple-touch-icon" href="{% static 'app-assets/images/ico/apple-icon-120.png' %}">
    <link rel="shortcut icon" type="image/x-icon" href="{% static 'app-assets/images/ico/favicon.ico' %}">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,500,600" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="https://programmers.co.kr/assets/application-4cfda7cb874c2274aee36af385c5155b55435104a991a8f03bd969252cbdf026.css">

    <!-- BEGIN: Vendor CSS-->
    <link rel="stylesheet" type="text/css" href="{% static 'app-assets/vendors/css/vendors.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'app-assets/vendors/css/charts/apexcharts.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'app-assets/vendors/css/extensions/tether-theme-arrows.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'app-assets/vendors/css/extensions/tether.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'app-assets/vendors/css/extensions/shepherd-theme-default.css' %}">
    <!-- END: Vendor CSS-->

    <!-- BEGIN: Theme CSS-->
    <link rel="stylesheet" type="text/css" href="{% static 'app-assets/css/bootstrap.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'app-assets/css/bootstrap-extended.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'app-assets/css/colors.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'app-assets/css/components.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'app-assets/css/themes/dark-layout.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'app-assets/css/themes/semi-dark-layout.css' %}">

    <!-- BEGIN: Page CSS-->
    <link rel="stylesheet" type="text/css" href="{% static 'app-assets/css/core/menu/menu-types/horizontal-menu.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'app-assets/css/core/colors/palette-gradient.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'app-assets/css/pages/dashboard-analytics.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'app-assets/css/pages/card-analytics.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'app-assets/css/plugins/tour/tour.css' %}">
    <!-- END: Page CSS-->

    <!-- BEGIN: Custom CSS-->
    <link rel="stylesheet" type="text/css" href="{% static 'assets/css/style.css' %}">
    <!-- END: Custom CSS-->

    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

    <!-- Include stylesheet -->
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">

    <!-- Include the Quill library -->
    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>

    <!-- Noto Sans KR font CDN -->
    <link href="https://fonts.googleapis.com/css?family=Noto+Sans+KR&display=swap" rel="stylesheet">

    <!-- Pdf viewer JS //-->
    <script src="{% static 'assets/js/pdf.js' %}"></script>

    <!-- Pdf object JS //-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js"></script>

    <!-- Split.js //-->
    <style type="text/css">
        html, body {
            width: 100%;
            height: 100%;
            margin: 0;

            /*
            position: relative;
            height: auto;
            min-height: 100% !important;
            */

            /* background-color: #2a363b; */
        }

        .flex-col {
            display: flex;
            flex-direction: column;
            height: 100%;
            overflow: auto;

            /* padding: 15px; */
        }

        .flex-row {
            display: flex;
            flex-direction: row;
            height: 100%;
        }

        .gutter.gutter-horizontal, .gutter.gutter-vertical {
            background-color: #fff;
        }

        .gutter.gutter-horizontal {
            cursor: ew-resize;
            /* border-right: 1px solid #0b0e0f; border-left: 1px solid #0b0e0f; */
            background: url("{% static 'assets/images/img-grippie-vertical.png' %}") no-repeat 0.625rem 50%;
            background-size: 0.875rem 2.25rem;
            background-color: #fff;
        }

        .gutter.gutter-vertical {
            cursor: ns-resize;
            /* border-top: 1px solid #0b0e0f; border-bottom: 1px solid #0b0e0f; */
            background-image: url("{% static 'assets/images/img-grippie-horizon.png' %}");
            background-size: 2.25rem 0.875rem;
            background-position-y: bottom;
            background-repeat: no-repeat;
            background-position: 50%;
        }

        #left-side-panel, #mid-side-panel, #right-side-panel, #ppt-viewer-wrap, #live-qna-chat-wrap, #user-notepad-wrap, #user-notepad-preview-wrap {
            overflow: auto;
            background-color: #fff;
        }

        .lesson-content {
            height: calc(100vh - 75px);
        }

        .content-header {
            border-bottom: 1px solid #dadada;
            padding: 15px;
            font-family: 'Noto Sans KR', sans-serif;
            /* color: #fff; */
            /* background-color: #3A464B; */
            background-color: #fbfbfb;
            font-size: 13px;
        }

        /* Talk bubble */
        /* CSS talk bubble */
        .talk-bubble {
            margin: 10px 10px 10px 30px;
            display: block;
            position: relative;
            width: 250px;
            height: auto;
            background-color: lightyellow;
        }
        .border{
            border: 8px solid #666;
        }
        .round{
            border-radius: 30px;
            -webkit-border-radius: 30px;
            -moz-border-radius: 30px;

        }

        /* Right triangle placed top left flush. */
        .tri-right.border.left-top:before {
            content: ' ';
            position: absolute;
            width: 0;
            height: 0;
            left: -40px;
            right: auto;
            top: -8px;
            bottom: auto;
            border: 32px solid;
            border-color: #666 transparent transparent transparent;
        }
        .tri-right.left-top:after{
            content: ' ';
            position: absolute;
            width: 0;
            height: 0;
            left: -20px;
            right: auto;
            top: 0px;
            bottom: auto;
            border: 22px solid;
            border-color: lightyellow transparent transparent transparent;
        }

        /* Right triangle, left side slightly down */
        .tri-right.border.left-in:before {
            content: ' ';
            position: absolute;
            width: 0;
            height: 0;
            left: -40px;
            right: auto;
            top: 30px;
            bottom: auto;
            border: 20px solid;
            border-color: #666 #666 transparent transparent;
        }
        .tri-right.left-in:after{
            content: ' ';
            position: absolute;
            width: 0;
            height: 0;
            left: -20px;
            right: auto;
            top: 38px;
            bottom: auto;
            border: 12px solid;
            border-color: lightyellow lightyellow transparent transparent;
        }

        /*Right triangle, placed bottom left side slightly in*/
        .tri-right.border.btm-left:before {
            content: ' ';
            position: absolute;
            width: 0;
            height: 0;
            left: -8px;
            right: auto;
            top: auto;
            bottom: -40px;
            border: 32px solid;
            border-color: transparent transparent transparent #666;
        }
        .tri-right.btm-left:after{
            content: ' ';
            position: absolute;
            width: 0;
            height: 0;
            left: 0px;
            right: auto;
            top: auto;
            bottom: -20px;
            border: 22px solid;
            border-color: transparent transparent transparent lightyellow;
        }

        /*Right triangle, placed bottom left side slightly in*/
        .tri-right.border.btm-left-in:before {
            content: ' ';
            position: absolute;
            width: 0;
            height: 0;
            left: 30px;
            right: auto;
            top: auto;
            bottom: -40px;
            border: 20px solid;
            border-color: #666 transparent transparent #666;
        }
        .tri-right.btm-left-in:after{
            content: ' ';
            position: absolute;
            width: 0;
            height: 0;
            left: 38px;
            right: auto;
            top: auto;
            bottom: -20px;
            border: 12px solid;
            border-color: lightyellow transparent transparent lightyellow;
        }

        /*Right triangle, placed bottom right side slightly in*/
        .tri-right.border.btm-right-in:before {
            content: ' ';
            position: absolute;
            width: 0;
            height: 0;
            left: auto;
            right: 30px;
            bottom: -40px;
            border: 20px solid;
            border-color: #666 #666 transparent transparent;
        }
        .tri-right.btm-right-in:after{
            content: ' ';
            position: absolute;
            width: 0;
            height: 0;
            left: auto;
            right: 38px;
            bottom: -20px;
            border: 12px solid;
            border-color: lightyellow lightyellow transparent transparent;
        }
        /*
            left: -8px;
          right: auto;
          top: auto;
            bottom: -40px;
            border: 32px solid;
            border-color: transparent transparent transparent #666;
            left: 0px;
          right: auto;
          top: auto;
            bottom: -20px;
            border: 22px solid;
            border-color: transparent transparent transparent lightyellow;

        /*Right triangle, placed bottom right side slightly in*/
        .tri-right.border.btm-right:before {
            content: ' ';
            position: absolute;
            width: 0;
            height: 0;
            left: auto;
            right: -8px;
            bottom: -40px;
            border: 20px solid;
            border-color: #666 #666 transparent transparent;
        }
        .tri-right.btm-right:after{
            content: ' ';
            position: absolute;
            width: 0;
            height: 0;
            left: auto;
            right: 0px;
            bottom: -20px;
            border: 12px solid;
            border-color: lightyellow lightyellow transparent transparent;
        }

        /* Right triangle, right side slightly down*/
        .tri-right.border.right-in:before {
            content: ' ';
            position: absolute;
            width: 0;
            height: 0;
            left: auto;
            right: -40px;
            top: 30px;
            bottom: auto;
            border: 20px solid;
            border-color: #666 transparent transparent #666;
        }
        .tri-right.right-in:after{
            content: ' ';
            position: absolute;
            width: 0;
            height: 0;
            left: auto;
            right: -20px;
            top: 38px;
            bottom: auto;
            border: 12px solid;
            border-color: lightyellow transparent transparent lightyellow;
        }

        /* Right triangle placed top right flush. */
        .tri-right.border.right-top:before {
            content: ' ';
            position: absolute;
            width: 0;
            height: 0;
            left: auto;
            right: -40px;
            top: -8px;
            bottom: auto;
            border: 32px solid;
            border-color: #666 transparent transparent transparent;
        }
        .tri-right.right-top:after{
            content: ' ';
            position: absolute;
            width: 0;
            height: 0;
            left: auto;
            right: -20px;
            top: 0px;
            bottom: auto;
            border: 20px solid;
            border-color: lightyellow transparent transparent transparent;
        }

        /* talk bubble contents */
        .talktext{
            padding: 1em;
            text-align: left;
            line-height: 1.5em;
        }
        .talktext p{
            /* remove webkit p margins */
            -webkit-margin-before: 0em;
            -webkit-margin-after: 0em;
        }

        /* Scrollbar */
        /* width */
        ::-webkit-scrollbar {
          width: 10px;
        }

        /* Track
        ::-webkit-scrollbar-track {
          background: #2a363b;
        }
        */

        /* Handle */
        ::-webkit-scrollbar-thumb {
          background: #b9ceeb;
        }

        /* Handle on hover */
        ::-webkit-scrollbar-thumb:hover {
          background: #87a8d0;
        }

        /* chat input */
        #live-qna-chat-input {
            display: block;
            width: 100%;
            height: 50px;
            /* border-top: 1px solid #0b0e0f; */
            box-shadow: 10px -5px 30px 0 rgba(0, 0, 0, 0.05);

            position: absolute;
            bottom: 0;
        }

        #live-qna-chat-content {
            position: relative;
            height: calc(100% - 50px);
        }

        #live-qna-chat-box {
            height: auto;
            min-height: calc(100% - 50px);
            max-height: calc(100% - 50px);
            overflow-y: scroll;
            overflow-x: hidden;
        }

        #message {
            /* width: 85%; */
            height: calc(100% - 1px);
            border: none;
            padding: 0 0 0 10px;
            /* color: #fff; */
            /* background-color: #434f54; */
        }

        #message:focus {
            outline: none;
        }

        #live-qna-chat-input > input[type=submit] {
            outline: none;
            border: none;
            background: none;
            color: #cad2da;
            font-size: 17px;
            float: right;
            height: 100%;
            vertical-align: middle;
            margin: 0px 10px 0 10px;
        }

        .lesson-note-content {
            /* color: #fff; */
            margin: 10px 15px 10px 15px;
        }

        .ql-container.ql-snow {
            border: none;
        }
    </style>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/split.js/1.2.0/split.min.js"></script>
</head>

<body class="horizontal-layout horizontal-menu 2-columns  navbar-floating footer-static  " data-open="hover" data-menu="horizontal-menu" data-col="2-columns">
<div class="lesson-wrap" style="height: 100%">
    <!-- <div class="lesson-title"></div> -->

    <!-- BEGIN: Header-->
    <nav class="header-navbar navbar-expand-lg navbar navbar-with-menu navbar-shadow navbar-brand-center">
        <div class="navbar-header d-xl-block d-none">
            <ul class="nav navbar-nav flex-row">
                <li class="nav-item"><a class="navbar-brand" href="{% static 'html/ltr/horizontal-menu-template/index.html' %}">
                        <div class="brand-logo"></div>
                    </a></li>
            </ul>
        </div>
        <div class="navbar-wrapper">
            <div class="navbar-container content">
                <div class="navbar-collapse" id="navbar-mobile">
                    <div class="mr-auto float-left bookmark-wrapper d-flex align-items-center">
                        <ul class="nav navbar-nav">
                            <li class="nav-item mobile-menu d-xl-none mr-auto"><a class="nav-link nav-menu-main menu-toggle hidden-xs" href="#"><i class="ficon feather icon-menu"></i></a></li>
                        </ul>
                        <ul class="nav navbar-nav bookmark-icons">
                            <li class="nav-item d-none d-lg-block"><a class="nav-link" href="app-todo.html" data-toggle="tooltip" data-placement="top" title="Todo"><i class="ficon feather icon-check-square"></i></a></li>
                            <li class="nav-item d-none d-lg-block"><a class="nav-link" href="app-chat.html" data-toggle="tooltip" data-placement="top" title="Chat"><i class="ficon feather icon-message-square"></i></a></li>
                            <li class="nav-item d-none d-lg-block"><a class="nav-link" href="app-email.html" data-toggle="tooltip" data-placement="top" title="Email"><i class="ficon feather icon-mail"></i></a></li>
                            <li class="nav-item d-none d-lg-block"><a class="nav-link" href="app-calender.html" data-toggle="tooltip" data-placement="top" title="Calendar"><i class="ficon feather icon-calendar"></i></a></li>
                        </ul>
                        <ul class="nav navbar-nav">
                            <li class="nav-item d-none d-lg-block"><a class="nav-link bookmark-star"><i class="ficon feather icon-star warning"></i></a>
                                <div class="bookmark-input search-input">
                                    <div class="bookmark-input-icon"><i class="feather icon-search primary"></i></div>
                                    <input class="form-control input" type="text" placeholder="Explore Vuexy..." tabindex="0" data-search="template-list">
                                    <ul class="search-list search-list-bookmark"></ul>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <ul class="nav navbar-nav float-right">
                        <li class="dropdown dropdown-language nav-item"><a class="dropdown-toggle nav-link" id="dropdown-flag" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="flag-icon flag-icon-us"></i><span class="selected-language">English</span></a>
                            <div class="dropdown-menu" aria-labelledby="dropdown-flag"><a class="dropdown-item" href="#" data-language="en"><i class="flag-icon flag-icon-us"></i> English</a><a class="dropdown-item" href="#" data-language="fr"><i class="flag-icon flag-icon-fr"></i> French</a><a class="dropdown-item" href="#" data-language="de"><i class="flag-icon flag-icon-de"></i> German</a><a class="dropdown-item" href="#" data-language="pt"><i class="flag-icon flag-icon-pt"></i> Portuguese</a></div>
                        </li>
                        <li class="nav-item d-none d-lg-block"><a class="nav-link nav-link-expand"><i class="ficon feather icon-maximize"></i></a></li>
                        <li class="nav-item nav-search"><a class="nav-link nav-link-search"><i class="ficon feather icon-search"></i></a>
                            <div class="search-input">
                                <div class="search-input-icon"><i class="feather icon-search primary"></i></div>
                                <input class="input" type="text" placeholder="Explore Vuexy..." tabindex="-1" data-search="template-list">
                                <div class="search-input-close"><i class="feather icon-x"></i></div>
                                <ul class="search-list search-list-main"></ul>
                            </div>
                        </li>
                        <li class="dropdown dropdown-notification nav-item"><a class="nav-link nav-link-label" href="#" data-toggle="dropdown"><i class="ficon feather icon-bell"></i><span class="badge badge-pill badge-primary badge-up">5</span></a>
                            <ul class="dropdown-menu dropdown-menu-media dropdown-menu-right">
                                <li class="dropdown-menu-header">
                                    <div class="dropdown-header m-0 p-2">
                                        <h3 class="white">5 New</h3><span class="notification-title">App Notifications</span>
                                    </div>
                                </li>
                                <li class="scrollable-container media-list"><a class="d-flex justify-content-between" href="javascript:void(0)">
                                        <div class="media d-flex align-items-start">
                                            <div class="media-left"><i class="feather icon-plus-square font-medium-5 primary"></i></div>
                                            <div class="media-body">
                                                <h6 class="primary media-heading">You have new order!</h6><small class="notification-text"> Are your going to meet me tonight?</small>
                                            </div><small>
                                                <time class="media-meta" datetime="2015-06-11T18:29:20+08:00">9 hours ago</time></small>
                                        </div>
                                    </a><a class="d-flex justify-content-between" href="javascript:void(0)">
                                        <div class="media d-flex align-items-start">
                                            <div class="media-left"><i class="feather icon-download-cloud font-medium-5 success"></i></div>
                                            <div class="media-body">
                                                <h6 class="success media-heading red darken-1">99% Server load</h6><small class="notification-text">You got new order of goods.</small>
                                            </div><small>
                                                <time class="media-meta" datetime="2015-06-11T18:29:20+08:00">5 hour ago</time></small>
                                        </div>
                                    </a><a class="d-flex justify-content-between" href="javascript:void(0)">
                                        <div class="media d-flex align-items-start">
                                            <div class="media-left"><i class="feather icon-alert-triangle font-medium-5 danger"></i></div>
                                            <div class="media-body">
                                                <h6 class="danger media-heading yellow darken-3">Warning notifixation</h6><small class="notification-text">Server have 99% CPU usage.</small>
                                            </div><small>
                                                <time class="media-meta" datetime="2015-06-11T18:29:20+08:00">Today</time></small>
                                        </div>
                                    </a><a class="d-flex justify-content-between" href="javascript:void(0)">
                                        <div class="media d-flex align-items-start">
                                            <div class="media-left"><i class="feather icon-check-circle font-medium-5 info"></i></div>
                                            <div class="media-body">
                                                <h6 class="info media-heading">Complete the task</h6><small class="notification-text">Cake sesame snaps cupcake</small>
                                            </div><small>
                                                <time class="media-meta" datetime="2015-06-11T18:29:20+08:00">Last week</time></small>
                                        </div>
                                    </a><a class="d-flex justify-content-between" href="javascript:void(0)">
                                        <div class="media d-flex align-items-start">
                                            <div class="media-left"><i class="feather icon-file font-medium-5 warning"></i></div>
                                            <div class="media-body">
                                                <h6 class="warning media-heading">Generate monthly report</h6><small class="notification-text">Chocolate cake oat cake tiramisu marzipan</small>
                                            </div><small>
                                                <time class="media-meta" datetime="2015-06-11T18:29:20+08:00">Last month</time></small>
                                        </div>
                                    </a></li>
                                <li class="dropdown-menu-footer"><a class="dropdown-item p-1 text-center" href="javascript:void(0)">Read all notifications</a></li>
                            </ul>
                        </li>
                        <li class="dropdown dropdown-user nav-item"><a class="dropdown-toggle nav-link dropdown-user-link" href="#" data-toggle="dropdown">
                                <div class="user-nav d-sm-flex d-none"><span class="user-name text-bold-600">John Doe</span><span class="user-status">Available</span></div><span><img class="round" src="{% static 'app-assets/images/portrait/small/avatar-s-11.jpg' %}" alt="avatar" height="40" width="40"></span>
                            </a>
                            <div class="dropdown-menu dropdown-menu-right"><a class="dropdown-item" href="page-user-profile.html"><i class="feather icon-user"></i> Edit Profile</a><a class="dropdown-item" href="app-email.html"><i class="feather icon-mail"></i> My Inbox</a><a class="dropdown-item" href="app-todo.html"><i class="feather icon-check-square"></i> Task</a><a class="dropdown-item" href="app-chat.html"><i class="feather icon-message-square"></i> Chats</a>
                                <div class="dropdown-divider"></div><a class="dropdown-item" href="auth-login.html"><i class="feather icon-power"></i> Logout</a>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>
    <!-- END: Header-->

    <!-- BEGIN: CONTENT-->
    <div class="lesson-content">
        <div class="flex-row">
            <div id="left-side-panel">
                <div class="flex-col">
                    <div id="user-notepad-wrap" style="background-color: #fff; overflow: hidden;">
                        <div id="user-notepad-content" style="height: calc(100% - 42px);">
                            <p></p>
                        </div>
                    </div>
                    <div id="user-notepad-preview-wrap">
                        <div class="content-header">
                            Notepad - preview
                        </div>
                        <div id="user-notepad-preview-content">
                        </div>
                    </div>
                </div>
            </div>
            <div id="mid-side-panel">
                <div class="flex-col">
                    <div id="ppt-viewer-wrap">
                        <div style="width: 100%; height: 100%; overflow-y: hidden;" id="ppt-viewer-wrap">
                            <!--
                            <div class="content-header">
                                PPT Viewer
                            </div>
                            -->
                            <div id="ppt-viewer-content" style="height: 100%; width: 100%;">
                                <!-- <canvas id="ppt-viewer"></canvas> -->
                                <iframe id="ppt-frame" style="border: none; height: 100%; width: 100%;" src="/chat/render-pdf/"></iframe>
                            </div>
                        </div>
                    </div>
                    <div id="live-qna-chat-wrap">
                        <div class="content-header">
                            Live Q&A
                        </div>
                        <div id="live-qna-chat-content">
                            <div id="live-qna-chat-box">
                            </div>
                            <div id="live-qna-chat-input">
                                <input type="text" autocomplete="off" size="30" id="message" placeholder="메시지를 입력하세요">
                                <input type="submit" id="message-submit" value="보내기">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="right-side-panel">
                <div class="content-header">
                    Note
                </div>
                <div class="lesson-note-content">
                    <!-- Line Area Chart -->
                    <div class="col-lg-6 col-md-12">
                        <div class="card">
                            <div class="card-header">
                                <h4 class="card-title">Line Area Chart</h4>
                            </div>
                            <div class="card-content">
                                <div class="card-body">
                                    <div id="line-area-chart"></div>
                                </div>
                            </div>
                        </div>
                    </div>


                </div>
            </div>
        </div>
    </div>
    <!-- END: CONTENT-->

    <div class="lesson-bottom">

    </div>
</div>

<!-- BEGIN: Vendor JS-->
<script src="{% static 'app-assets/vendors/js/vendors.min.js' %}"></script>
<!-- BEGIN Vendor JS-->

<!-- BEGIN: Page Vendor JS-->
<script src="{% static 'app-assets/vendors/js/ui/jquery.sticky.js' %}"></script>
<script src="{% static 'app-assets/vendors/js/charts/apexcharts.min.js' %}"></script>
<script src="{% static 'app-assets/vendors/js/extensions/tether.min.js' %}"></script>
<script src="{% static 'app-assets/vendors/js/extensions/shepherd.min.js' %}"></script>
<!-- END: Page Vendor JS-->

<!-- BEGIN: Theme JS-->
<script src="{% static 'app-assets/js/core/app-menu.js' %}"></script>
<script src="{% static 'app-assets/js/core/app.js' %}"></script>
<script src="{% static 'app-assets/js/scripts/components.js' %}"></script>
<!-- END: Theme JS-->

<!-- BEGIN: Page JS-->
<script src="{% static 'app-assets/js/scripts/pages/dashboard-analytics.js' %}"></script>
<!-- END: Page JS-->

<script type="text/javascript">
    // Environment state variables
    let current_ppt_page = 1;

    // Split.js layout
    Split(['#left-side-panel', '#mid-side-panel', '#right-side-panel'], {
        elementStyle: (dimension, size, gutterSize) => ({
            'flex-basis': `calc(${size}% - ${gutterSize}px)`,
        }),
        gutterStyle: (dimension, gutterSize) => ({
            'flex-basis': `${gutterSize}px`,
        }),
        onDrag: () => {
        },
        onDragEnd: () => {
            let dom = $('#ppt-viewer-wrap');
            scale = dom.width() / dom.height();
            // renderPage(current_ppt_page);
        },

        gutterSize: 24,
        minSize: [0, 0, 0],
    });

    Split(['#ppt-viewer-wrap', '#live-qna-chat-wrap'], {
        elementStyle: (dimension, size, gutterSize) => ({
            'flex-basis': `calc(${size}% - ${gutterSize}px)`,
        }),
        gutterStyle: (dimension, gutterSize) => ({
            'flex-basis': `${gutterSize}px`,
        }),

        gutterSize: 14,
        direction: 'vertical',
        cursor: 'row-resize',
        minSize: [0, 0],
    });

    Split(['#user-notepad-wrap', '#user-notepad-preview-wrap'], {
        elementStyle: (dimension, size, gutterSize) => ({
            'flex-basis': `calc(${size}% - ${gutterSize}px)`,
        }),
        gutterStyle: (dimension, gutterSize) => ({
            'flex-basis': `${gutterSize}px`,
        }),

        gutterSize: 14,
        direction: 'vertical',
        cursor: 'row-resize',
        minSize: [0, 0],
    });

    <!-- Initialize Quill editor -->
    var quill = new Quill('#user-notepad-content', {
        theme: 'snow'
    });

    // WebSocket
    let chatSocket = new WebSocket('ws://' + window.location.host + '/ws/chat/sampleroomid/');

    function wrapRenderPPTPage(data) {
        let page = data['data']['page'];
        let numPages = document.getElementById("ppt-frame").contentWindow.PDFViewerApplication.pagesCount;
        if((page > numPages) || (page < 1)){
            return;
        }
        document.getElementById("ppt-frame").contentWindow.PDFViewerApplication.page = page;
    }

    function wrapLiveQnAChat(data) {
        let qna = data['data']['qna'];
        if (qna === '') {
            return
        }

        let html_code =
            '                                <div class="talk-bubble tri-right left-top">\n' +
            '                                    <div class="talktext">\n' +
            '                                        <p>' + qna + '</p>\n' +
            '                                    </div>\n' +
            '                                </div>';

        $('#live-qna-chat-box').append(html_code);
        $('#live-qna-chat-box').scrollTop($('#live-qna-chat-box')[0].scrollHeight);
    }

    document.querySelector('#message').onkeyup = function(e) {
        if (e.keyCode === 13) {  // enter, return
            document.querySelector('#message-submit').click();
        }
    };

    document.querySelector('#message-submit').onclick = (error) => {
        let messageInputDom = document.querySelector('#message');
        let message = messageInputDom.value;
        chatSocket.send(JSON.stringify({
            'action': 'live-qna-chat',
            'data': {'qna': message}
        }));

        messageInputDom.value = '';
    };

    // Init onmessage callback
    chatSocket.onmessage = function (message) {
        // Receive message data
        let message_data = JSON.parse(message.data);

        // Message event handler
        switch (message_data.action) {
            case 'sync-ppt-page':
                wrapRenderPPTPage(message_data);
                break;
            case 'live-qna-chat':
                wrapLiveQnAChat(message_data);
                break;
            default:
                break;
        }
    }
</script>
</body>
</html>
